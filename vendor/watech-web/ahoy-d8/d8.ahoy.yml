ahoyapi: v2
commands:
  total-update:
    cmd: "composer update --with-dependencies;composer prepare-for-pantheon;composer install --no-dev --ignore-platform-reqs"
    usage: "Update Drupal modules and core. Example: ahoy total-update"
  dbcc:
    cmd: "~/vendor/pantheon-systems/terminus/bin/terminus drush ${PWD##*/}.$1 -- updb -y;
    ~/vendor/pantheon-systems/terminus/bin/terminus drush ${PWD##*/}.$1 -- cr"
    usage: "Run Terminus Drush database update and cache clear for your current site folder. Example: ahoy dbcc <environment name>"
  sendup:
    cmd: "git add .;git commit -m \"$1\";git push"
    usage: "Run Git add, commit and push to your current site folder. Example: ahoy sendup \"<your commit message>\""
  media-embed-update:
    cmd: "~/vendor/pantheon-systems/terminus/bin/terminus drush ${PWD##*/}.$1 -- ckeditor_media_embed:install -y"
    usage: "Update the CKEditor Media Embed plugins. Make sure the site is in SFTP and to run this on every environment. Example: ahoy media-embed-update <env>"
  backup:
    cmd: "~/vendor/pantheon-systems/terminus/bin/terminus backup:create --keep-for 6 -- ${PWD##*/}.$1"
    usage: "create a backup of a single environment. Example: ahoy backup <environment name>"
  backup-all:
    cmd: "~/vendor/pantheon-systems/terminus/bin/terminus backup:create --keep-for 6 -- ${PWD##*/}.dev;
    ~/vendor/pantheon-systems/terminus/bin/terminus backup:create --keep-for 6 -- ${PWD##*/}.test;
    ~/vendor/pantheon-systems/terminus/bin/terminus backup:create --keep-for 6 -- ${PWD##*/}.live"
    usage: "create a backup of a dev, test and live. Example: ahoy backup-all"
  status:
    cmd: "composer outdated 'drupal/*'"
    usage: "Displays a list of all outdated modules and themes."
  login:
    cmd: "~/vendor/pantheon-systems/terminus/bin/terminus drush ${PWD##*/}.$1 -- uli $2"
    usage: "Create a one-time login to a website. Example: ahoy login <env> <username> "
  conflicts:
    cmd: "git diff --name-only --diff-filter=U"
    usage: "Displays a nice list of files with merge conflicts in the current Git repo."
  fix-conflicts:
    cmd: "git add .;git commit -m \"$2\";git pull -s recursive -X theirs origin $1"
    usage: "Fixes any potential merge conflicts. Has to be run before getting into a merge conflict. Runs through a normal git add, commit, pull command chain. Example: ahoy fix-conflicts <env> \"<message>\""
  take-me-away:
    cmd: "echo \"Don't you wish. Get back to work.\""
